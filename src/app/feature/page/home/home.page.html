<!-- Twitter graph -->
<twitter-graph class="twitter-graph"
    [profiles]="this.twitterProfiles"
    [communities]="this.twitterCommunities"
    (profileClicked)="openTwitterProfileDialog($event)"
    (communityClicked)="openTwitterCommunityDialog($event)">
</twitter-graph>

<!-- Searchbar -->
<mat-form-field class="searchbar" appearance="outline">
    <mat-icon matPrefix>search</mat-icon>
    
    <mat-label>Suchen</mat-label>
    <input matInput [formControl]="searchFormControl" [matAutocomplete]="searchAutocomplete">
    <mat-autocomplete class="searchbar-autocomplete" #searchAutocomplete="matAutocomplete"
        [displayWith]="stringifyTwitterProfile"
        (optionSelected)="onSearchResultSelected($event.option.value)">
        <mat-option *ngFor="let twitterProfile of filteredTwitterProfiles | async" [value]="twitterProfile">
            <mat-icon class="searchbar-autocomplete-icon">person</mat-icon>
            {{stringifyTwitterProfile(twitterProfile)}}
        </mat-option>
    </mat-autocomplete>

    <button mat-icon-button matSuffix
        [matMenuTriggerFor]="filterMenu"
        (click)="$event.stopPropagation()">
        <mat-icon>filter_list</mat-icon>
    </button>
    <button mat-icon-button matSuffix 
        [matMenuTriggerFor]="moreMenu"
        (click)="$event.stopPropagation()">
        <mat-icon>more_vert</mat-icon>
    </button>
</mat-form-field>

<mat-menu #filterMenu="matMenu">
    <div class="menu-title">Filter</div>
    <div style="padding-left: 16px; margin-top: 24px; padding-right: 16px; width: 220px; overflow: hidden;" (click)="$event.stopPropagation()" (mouseleave)="a.blur();b.blur();" (mouseup)="a.blur();b.blur();">
        <div>Follower (Minimal)</div>
        <mat-slider style="width: 100%" #a
            thumbLabel
            tickInterval="1000"
            color="primary"
            step="1000"
            min="0"
            max="100000">
        </mat-slider>

        <div>Follower (Maximal)</div>
        <mat-slider style="width: 100%" #b
            thumbLabel
            tickInterval="1000"
            step="1000"
            color="primary"
            value="100000"
            min="0"
            max="100000">
        </mat-slider>
    </div>
</mat-menu>

<mat-menu #moreMenu="matMenu">
    <div class="menu-title">Mehr</div>
    <button mat-menu-item (click)="openSettingsDialog()">Einstellungen</button>
    <button mat-menu-item>Hilfe</button>
</mat-menu>